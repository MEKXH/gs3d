import{_ as a,c as i,o as t,ag as e}from"./chunks/framework.B-su3jjs.js";const c=JSON.parse('{"title":"匿名访问","description":"","frontmatter":{},"headers":[],"relativePath":"guide/anonymous-access.md","filePath":"guide/anonymous-access.md"}'),n={name:"guide/anonymous-access.md"};function h(l,s,p,o,r,d){return t(),i("div",null,s[0]||(s[0]=[e(`<h1 id="匿名访问" tabindex="-1">匿名访问 <a class="header-anchor" href="#匿名访问" aria-label="Permalink to &quot;匿名访问&quot;">​</a></h1><p>GS3D下载工具支持匿名访问公开的AWS S3存储桶，这意味着你可以在不提供AWS凭证的情况下下载公开数据。本页面详细介绍匿名访问功能。</p><h2 id="何为公开存储桶" tabindex="-1">何为公开存储桶 <a class="header-anchor" href="#何为公开存储桶" aria-label="Permalink to &quot;何为公开存储桶&quot;">​</a></h2><p>公开存储桶是AWS S3中设置了公开读取权限的存储桶，通常用于分享公共数据集、开源软件、文档等。许多科研机构、政府组织和开源项目使用公开存储桶来分享数据。</p><h2 id="启用匿名访问" tabindex="-1">启用匿名访问 <a class="header-anchor" href="#启用匿名访问" aria-label="Permalink to &quot;启用匿名访问&quot;">​</a></h2><p>使用<code>--anonymous</code>或<code>-a</code>参数可以启用匿名访问模式：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GS3D.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://public-bucket/folder/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span></span></code></pre></div><p>在匿名访问模式下，脚本会使用AWS SDK的无签名配置（<code>botocore.UNSIGNED</code>），完全跳过认证过程。</p><h2 id="匿名访问示例" tabindex="-1">匿名访问示例 <a class="header-anchor" href="#匿名访问示例" aria-label="Permalink to &quot;匿名访问示例&quot;">​</a></h2><h3 id="下载公开气候数据" tabindex="-1">下载公开气候数据 <a class="header-anchor" href="#下载公开气候数据" aria-label="Permalink to &quot;下载公开气候数据&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GS3D.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://geos-chem/GEOS_2x2.5/MERRA2/2024/02/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --output-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./climate-data</span></span></code></pre></div><h3 id="结合区域参数" tabindex="-1">结合区域参数 <a class="header-anchor" href="#结合区域参数" aria-label="Permalink to &quot;结合区域参数&quot;">​</a></h3><p>有时需要指定正确的AWS区域才能成功访问公开存储桶：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GS3D.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://public-bucket/folder/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --region</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> us-east-1</span></span></code></pre></div><h3 id="保留目录结构" tabindex="-1">保留目录结构 <a class="header-anchor" href="#保留目录结构" aria-label="Permalink to &quot;保留目录结构&quot;">​</a></h3><p>你可以将匿名访问与目录结构保留选项结合使用：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GS3D.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://public-dataset/nested/path/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --keep-structure</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --output-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./data</span></span></code></pre></div><h2 id="技术实现" tabindex="-1">技术实现 <a class="header-anchor" href="#技术实现" aria-label="Permalink to &quot;技术实现&quot;">​</a></h2><p>在匿名访问模式下，GS3D下载工具使用以下配置创建S3客户端：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> botocore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> UNSIGNED</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> botocore.config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s3_client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> boto3.client(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;s3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Config(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">signature_version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UNSIGNED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>这确保了请求不会包含任何认证头，允许访问公开存储桶。</p><h2 id="常见问题排解" tabindex="-1">常见问题排解 <a class="header-anchor" href="#常见问题排解" aria-label="Permalink to &quot;常见问题排解&quot;">​</a></h2><h3 id="无法访问公开存储桶" tabindex="-1">无法访问公开存储桶 <a class="header-anchor" href="#无法访问公开存储桶" aria-label="Permalink to &quot;无法访问公开存储桶&quot;">​</a></h3><p>如果在使用匿名模式时仍然遇到访问问题：</p><ol><li><strong>确认存储桶确实是公开的</strong>：并非所有S3存储桶都是公开的，某些看似公开的数据可能仍需要凭证</li><li><strong>尝试指定正确的区域</strong>：公开存储桶通常仍然需要在正确的区域访问<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3_folder_downloader.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://public-bucket/folder/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --region</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> us-east-1</span></span></code></pre></div></li><li><strong>检查URL格式</strong>：确保S3 URL格式正确，包括正确的存储桶名和前缀</li><li><strong>检查网络连接</strong>：确保你的网络能够访问AWS S3服务</li></ol><h3 id="常见错误消息" tabindex="-1">常见错误消息 <a class="header-anchor" href="#常见错误消息" aria-label="Permalink to &quot;常见错误消息&quot;">​</a></h3><h4 id="access-denied" tabindex="-1">&quot;Access Denied&quot; <a class="header-anchor" href="#access-denied" aria-label="Permalink to &quot;&quot;Access Denied&quot;&quot;">​</a></h4><p>这通常意味着存储桶不是公开的，或者特定前缀（文件夹）不是公开的。</p><p>解决方案：</p><ul><li>确认存储桶和前缀确实允许公开访问</li><li>如果你有权限，使用AWS凭证而不是匿名访问</li></ul><h4 id="nosuchbucket" tabindex="-1">&quot;NoSuchBucket&quot; <a class="header-anchor" href="#nosuchbucket" aria-label="Permalink to &quot;&quot;NoSuchBucket&quot;&quot;">​</a></h4><p>这表明指定的存储桶不存在。</p><p>解决方案：</p><ul><li>检查存储桶名称拼写是否正确</li><li>确认存储桶仍然存在（有时公开数据集会被移除）</li></ul><h4 id="permanentredirect" tabindex="-1">&quot;PermanentRedirect&quot; <a class="header-anchor" href="#permanentredirect" aria-label="Permalink to &quot;&quot;PermanentRedirect&quot;&quot;">​</a></h4><p>这表明存储桶在不同的区域。</p><p>解决方案：</p><ul><li>使用<code>--region</code>参数指定正确的区域</li><li>如果不确定区域，可以尝试常见区域如<code>us-east-1</code>、<code>us-west-2</code>等</li></ul><h2 id="公开数据集示例" tabindex="-1">公开数据集示例 <a class="header-anchor" href="#公开数据集示例" aria-label="Permalink to &quot;公开数据集示例&quot;">​</a></h2><p>以下是一些可以用GS3D下载工具匿名访问的公开数据集示例：</p><ul><li><p><strong>GEOS-Chem数据</strong>：气候和大气化学数据</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GS3D.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://geos-chem/GEOS_2x2.5/MERRA2/2024/02/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span></span></code></pre></div></li><li><p><strong>NASA NEX数据</strong>：气候模拟数据</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GS3D.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://nasanex/NEX-DCP30/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --region</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> us-west-2</span></span></code></pre></div></li><li><p><strong>Common Crawl</strong>：网络爬虫数据</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GS3D.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3://commoncrawl/crawl-data/CC-MAIN-2023-06/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous</span></span></code></pre></div></li></ul><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><p>在使用匿名访问功能时：</p><ol><li><strong>确认文件总数和大小</strong>：某些公开数据集可能非常大，请在下载前确认大小</li><li><strong>使用合适的并发线程数</strong>：根据文件大小和数量调整<code>--max-workers</code>参数</li><li><strong>考虑网络带宽限制</strong>：大型数据集下载可能消耗大量带宽</li><li><strong>优先考虑官方下载渠道</strong>：某些数据提供者可能提供更优化的下载方式</li></ol><h2 id="权限与尊重" tabindex="-1">权限与尊重 <a class="header-anchor" href="#权限与尊重" aria-label="Permalink to &quot;权限与尊重&quot;">​</a></h2><p>虽然公开存储桶允许任何人访问，但请遵循数据提供者的使用条款和许可要求。匿名访问不意味着数据可以任意使用 - 请确保尊重数据所有者的权利和任何适用的使用限制。</p>`,46)]))}const g=a(n,[["render",h]]);export{c as __pageData,g as default};
